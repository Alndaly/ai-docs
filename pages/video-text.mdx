import { Cards, Card, Callout, Steps } from 'nextra/components';

# 视频加字幕

基础项目：

- https://github.com/ggerganov/whisper.cpp
- https://ffmpeg.org/download.html#get-sources

## 快速开始

<Steps>
### 配置 `whisper.cpp`

详情见[语音转文字](./audio-to-text)

### 下载ffmpeg

https://ffmpeg.org/download.html

### 将视频文件转为16bit的wav格式

```shell
ffmpeg -i input.mp4 -ar 16000 -ac 1 -c:a pcm_s16le output.wav
```

### 将视频文件识别文字并且生成字幕srt文件

```shell
./main -m models/ggml-medium-q5_0.bin input.wav -l zh -osrt
```

input.wav是你需要被识别的音频文件。

### ffmpeg将srt文件添加到视频文件中

```shell
ffmpeg -i ./input.mp4 -vf subtitles=input.srt output.mp4
```

input.mp4是输入的视频文件，output.mp4是输出的带有字幕的视频文件。

</Steps>